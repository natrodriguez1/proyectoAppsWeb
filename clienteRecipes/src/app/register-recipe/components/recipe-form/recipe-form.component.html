<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow">
        <div class="card-header bg-danger text-white">
          <h3 class="mb-0">Add New Recipe</h3>
        </div>
        <div class="card-body">
          <!-- Agregamos #recipeForm y (ngSubmit) -->
          <form #recipeForm="ngForm" (ngSubmit)="onSubmit(recipeForm)">

            <!-- Recipe Name -->
            <div class="mb-3">
              <label for="recipeName" class="form-label">Recipe Name</label>
              <input type="text" class="form-control" id="recipeName" 
                     name="recipeName" placeholder="Enter recipe name" 
                     ngModel>
            </div>

            <!-- Country/Area -->
            <div class="mb-3">
              <label for="recipeArea" class="form-label">Country/Area</label>
              <select class="form-select" id="recipeArea" name="recipeArea" ngModel>
                <option value="" disabled>Select a country</option>
                <option *ngFor="let country of countries" [value]="country.id">{{ country.name }}</option>
              </select>
            </div>

            <!-- Category -->
            <div class="mb-3">
              <label for="recipeCategory" class="form-label">Category</label>
              <select class="form-select" id="recipeCategory" name="recipeCategory" ngModel>
                <option value="" disabled >Select a category</option>
                <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
              </select>
            </div>

            <!-- Thumbnail Image URL -->
            <div class="mb-3">
              <label for="thumbnailUrl" class="form-label">Thumbnail Image URL</label>
              <input type="url" class="form-control" id="thumbnailUrl" name="thumbnailUrl" 
                     placeholder="Enter image URL" ngModel>
              <div class="form-text">Enter a URL for the recipe's thumbnail image</div>
            </div>

            <!-- YouTube Video URL -->
            <div class="mb-3">
              <label for="youtubeUrl" class="form-label">YouTube Video URL</label>
              <input type="url" class="form-control" id="youtubeUrl" name="youtubeUrl" 
                     placeholder="Enter YouTube video URL" ngModel>
              <div class="form-text">Provide a link to a video demonstration (optional)</div>
            </div>

            <!-- Tags -->
            <div class="mb-3">
              <label for="recipeTags" class="form-label">Tags</label>
              <input type="text" class="form-control" id="recipeTags" name="recipeTags" 
                     placeholder="Enter tags separated by commas" ngModel>
              <div class="form-text">E.g. Breakfast, Vegetarian, Quick, Spicy</div>
            </div>


            <!-- Ingredients -->
            <div class="mb-3">
              <label class="form-label">Ingredients</label>
              <div class="card mb-3">
                <div class="card-body">
                  
                  <div class="row g-3 mb-3">
                    <div class="col-md-5">
                      <input type="text" class="form-control" 
                             placeholder="Enter ingredient" 
                             [(ngModel)]="ingredient.name" 
                             name="newIngredientName" ngModel>
                    </div>
                    <div class="col-md-3">
                      <input type="number" min="0.01" step="0.01" class="form-control" 
                             placeholder="Amount" 
                             [(ngModel)]="ingredient.quantity" 
                             name="newIngredientQuantity" ngModel>
                    </div>
                    <div class="col-md-3">
                      <select class="form-select" 
                              [(ngModel)]="ingredient.unit"
                              name="newIngredientUnit" ngModel>
                        <option value="" disabled selected>Unit</option>
                        <option value="count">count (pcs)</option>
                        <option value="g">grams (g)</option>
                        <option value="kg">kilograms (kg)</option>
                        <option value="oz">ounces (oz)</option>
                        <option value="lb">pounds (lb)</option>
                        <option value="ml">milliliters (ml)</option>
                        <option value="l">liters (l)</option>
                        <option value="tsp">teaspoon (tsp)</option>
                        <option value="tbsp">tablespoon (tbsp)</option>
                        <option value="cup">cups</option>
                      </select>
                    </div>
                    <div class="col-md-1">
                      <button type="button" class="btn btn-danger" (click)="addIngredient()">
                        <i class="bi bi-plus"></i>
                      </button>
                    </div>

                    <!-- Lista de ingredientes agregados -->
                    <div id="ingredientList" class="list-group">
                      <div *ngFor="let ing of ingredients; let i = index" class="list-group-item d-flex justify-content-between align-items-center">
                        <span>{{ing.name}} - {{ing.measure}}</span>
                        <button type="button" class="btn btn-sm btn-outline-danger" (click)="removeIngredient(i)">&times;</button>
                      </div>
                      <div class="text-muted text-center py-2" id="emptyIngredientMsg" *ngIf="ingredients.length === 0">
                        No ingredients added yet
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>

            <!-- Instructions -->
            <div class="mb-3">
              <label for="instructions" class="form-label">Instructions</label>
              <textarea class="form-control" id="instructions" name="instructions" rows="6" 
                        placeholder="Enter step-by-step instructions" ngModel ></textarea>
            </div>

            <!-- Botones -->
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <button type="button" class="btn btn-outline-secondary me-md-2">Cancel</button>
              <button type="submit" class="btn btn-danger">Submit Recipe</button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>
